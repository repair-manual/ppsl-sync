name: Build PPSL-Sync
on: [push]
jobs:
  dist:
    runs-on: ubuntu-18.04
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2

      - name: Get NodeJS v14.
        uses: actions/setup-node@v2
        with:
          node-version: '14'

      - name: Build dist
        run: "npx @vercel/ncc build src/index.js --license licenses.txt"
        run: "cp ./action.yaml ./dist/"
        run: "cp ./README.md ./dist/"
        run: "cp ./CONTRIBUTORS ./dist/"
        run: "cp ./LICENSE ./dist/"

      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./dist
        publish_branch: dist
